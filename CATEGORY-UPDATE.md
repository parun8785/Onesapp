# 在庫管理カテゴリー機能の追加

在庫管理に以下のカテゴリー機能を追加しました：
- 🍺 お酒
- 🥤 ソフトドリンク
- 🍽️ フード
- 🧻 消耗品
- 📦 その他

## 🚀 セットアップ手順

### ステップ1: Supabaseでマイグレーションを実行

既にデータベースが作成されている場合、以下のSQLを実行してカテゴリーカラムを追加します。

1. **Supabaseダッシュボード**を開く
2. **SQL Editor** → **New query** をクリック
3. 以下のSQLをコピー＆ペースト：

```sql
-- カテゴリーカラムを追加
ALTER TABLE public.inventory_items 
ADD COLUMN IF NOT EXISTS category text NOT NULL DEFAULT 'その他';

-- カテゴリーの制約を追加
ALTER TABLE public.inventory_items
DROP CONSTRAINT IF EXISTS inventory_items_category_check;

ALTER TABLE public.inventory_items
ADD CONSTRAINT inventory_items_category_check 
CHECK (category IN ('お酒', 'ソフトドリンク', 'フード', '消耗品', 'その他'));

-- インデックスを作成
CREATE INDEX IF NOT EXISTS inventory_items_category_idx 
ON public.inventory_items(category);
```

4. **Run** をクリック

### ステップ2: 開発サーバーを再起動

```bash
# ターミナルで Ctrl+C を押してサーバーを停止
# 再起動
npm run dev
```

### ステップ3: 動作確認

1. ブラウザで http://localhost:3000 を開く
2. 「在庫管理」タブを開く
3. カテゴリータブが表示されることを確認
4. 「商品を追加」をクリック
5. カテゴリーが選択できることを確認

---

## 🎨 実装された機能

### 1. カテゴリータブ

在庫管理ページの上部にカテゴリータブが表示されます：
- **すべて** - 全商品を表示
- **お酒** - お酒のみ表示
- **ソフトドリンク** - ソフトドリンクのみ表示
- **フード** - フードのみ表示
- **消耗品** - 消耗品のみ表示
- **その他** - その他のみ表示

各タブには商品数が表示されます。

### 2. 商品追加時のカテゴリー選択

商品を追加する際に、5つのカテゴリーから選択できます。

### 3. カテゴリーバッジ

各商品カードの上部に、カテゴリーがバッジで表示されます。

### 4. カテゴリー別ソート

商品は自動的にカテゴリー順、その後商品名順でソートされます。

---

## 📊 データベース構造

### 変更内容

`inventory_items` テーブルに以下のカラムが追加されました：

- **category**: カテゴリー名（'お酒', 'ソフトドリンク', 'フード', '消耗品', 'その他' のいずれか）
- デフォルト値: 'その他'
- 制約: 指定された5つのカテゴリーのみ許可

### インデックス

カテゴリーでの検索を高速化するため、インデックスが追加されました。

---

## 🔍 既存データの扱い

- 既存の商品には自動的に「その他」カテゴリーが設定されます
- 後からカテゴリーを変更することはできませんが、商品を削除して再追加することで変更可能です

---

## 🎯 使用例

### お酒の追加

1. 「商品を追加」をクリック
2. 商品名: 「アサヒスーパードライ」
3. カテゴリー: 「お酒」を選択
4. 「追加」をクリック

### ソフトドリンクの追加

1. 「商品を追加」をクリック
2. 商品名: 「コカ・コーラ」
3. カテゴリー: 「ソフトドリンク」を選択
4. 「追加」をクリック

### フードの追加

1. 「商品を追加」をクリック
2. 商品名: 「枝豆」
3. カテゴリー: 「フード」を選択
4. 「追加」をクリック

### カテゴリー別表示

- 「お酒」タブをクリック → お酒のみ表示
- 「ソフトドリンク」タブをクリック → ソフトドリンクのみ表示
- 「フード」タブをクリック → フードのみ表示

---

## ✨ 完了！

カテゴリー機能が正常に動作していることを確認してください！

問題が発生した場合は、以下を確認：
1. SQLマイグレーションが正常に実行されたか
2. 開発サーバーが再起動されたか
3. ブラウザのキャッシュをクリア（Ctrl+F5）

